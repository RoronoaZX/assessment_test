<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="app.js"></script>
    <!-- <link rel="stylesheet" href="style.css"> -->
    <title>Contacts</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .actions a {
            margin-right: 10px;
        }
        .search-container {
            text-align: right;
            margin-top: 10px;
        }
        .pagination {
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h2>Contacts</h2>
    <div>
        <a href="addContacts.html">Add Contact</a> |
        <a href="#">Contacts</a> |
        <a id="logoutBtn" href="#">Logout</a>
    </div>

    <div class="search-container">
        <input type="text" placeholder="Search" id="searchInput">
        <button onclick="searchContacts()">&#128269;</button>
    </div>

    <table id="contactsTable">
        <thead>
            <tr>
                <th>NAME</th>
                <th>COMPANY</th>
                <th>PHONE</th>
                <th>EMAIL</th>
                <th>ACTIONS</th>
            </tr>
        </thead>
        <tbody id="contactsTable">
            <!-- Contact data will be dynamically inserted here -->
        </tbody>
    </table>

    <div class="pagination">
        <a href="#" onclick="paginate(1)">1</a> |
        <a href="#" onclick="paginate(2)">2</a> |
        <a href="#" onclick="paginate(3)">3</a> |
        <a href="#" onclick="paginate('next')">Next</a>
    </div>

    <!-- <script>
        let currentPage = 1;

        // Function to fetch contacts from the API
        async function fetchContacts(page = 1) {
            try {
                const response = await fetch(`http://localhost:8000/api/contacts?page=${page}`);
                const data = await response.json();
                displayContacts(data.contacts);
            } catch (error) {
                console.error('Error fetching contacts:', error);
            }
        }

        // Function to display contacts in the table
        function displayContacts(contacts) {
            const contactsTable = document.getElementById('contactsTable').getElementsByTagName('tbody')[0];
            contactsTable.innerHTML = '';  // Clear the existing table rows

            contacts.forEach(contact => {
                const row = contactsTable.insertRow();
                row.innerHTML = `
                    <td>${contact.name}</td>
                    <td>${contact.company}</td>
                    <td>${contact.phone}</td>
                    <td>${contact.email}</td>
                    <td class="actions">
                        <a href="#">Edit</a> |
                        <a href="#">Delete</a>
                    </td>
                `;
            });
        }

        // Search function (could be extended to filter through the displayed contacts)
        function searchContacts() {
            const searchValue = document.getElementById('searchInput').value.toLowerCase();
            const rows = document.querySelectorAll('#contactsTable tbody tr');

            rows.forEach(row => {
                const name = row.cells[0].textContent.toLowerCase();
                const company = row.cells[1].textContent.toLowerCase();
                if (name.includes(searchValue) || company.includes(searchValue)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }

        // Pagination function
        function paginate(page) {
            if (page === 'next') {
                currentPage += 1;
            } else {
                currentPage = page;
            }
            fetchContacts(currentPage);
        }

        // Fetch contacts on page load
        window.onload = () => fetchContacts(currentPage);
    </script> -->
</body>
</html>
